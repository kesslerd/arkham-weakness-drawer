<!-- TODO translation file, footer component, help component, maybe don't provide allPacks, allTraits, allTypes but let the componets get the data from the service-->
<div class="main">
  <div class="content">
    <h1>Draw Random Basic Weakness</h1>

    <div>
      <pack-selector (selectionChange)="onPackChange($event)" [packs]="allPacks"></pack-selector>
    </div>
    <div>
      <trait-selector (selectionChange)="onTraitChange($event)" [traits]="allTraits"></trait-selector>
    </div>
    <div>
      <type-selector (selectionChange)="onTypeChange($event)" [types]="allTypes"></type-selector>
    </div>

    <div class="actions">
      <button (click)="draw(1)">Draw</button>
      <button (click)="chooseRandom()" [disabled]="lastDrawnWeaknesses.length < 2">Random from drawn</button>
      <button (click)="clear()">Reset</button>
    </div>

    @if(lastDrawnWeaknesses.length === 0) {
    <div class="help-text">
      <p>Select your desired filters and click <strong>Draw</strong> to get random weaknesses.</p>
      <p>Veto cards by clicking the <strong>âœ–</strong> next to the card title.</p>
      <p>Randomly select a card out of the visible cards by clicking <strong>Random from drawn</strong>.</p>
      <p>Vetoed cards will not show up again until you <strong>reset</strong>.</p>
    </div>
    }

    <last-draw [drawn]="lastDrawnWeaknesses" [packs]="allPacks" (veto)="onVeto($event)"></last-draw>
  </div>

  <footer class="footer">
    <p>
      Arkham Horror: The Card Game is copyrighted by Fantasy Flight Games.
      This website is not produced, endorsed, supported, or affiliated with Fantasy Flight Games.
    </p>
    <p>
      The images and other card data are provided by <a href="https://arkhamdb.com">arkhamdb.com</a>
    </p>
    <p>
      Report issues and provide suggestions on <a
        href="https: //github.com/kesslerd/arkham-weakness-drawer/issues">GitHub</a>
    </p>
  </footer>
</div>